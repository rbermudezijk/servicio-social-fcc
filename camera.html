<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>    
      #test {
        width:  3.5cm;
        height: 5cm;
        border: 1px solid;
        border-radius: 50%;
      }
      @media print {
        #player {
          display: none;
        }
      }
    </style>
</head>
<body>
        <img id='test'>
    
        <video id="player" width="700" controls autoplay></video>
        <button id="capture">Capturar</button>
        <canvas id="snapshot" width=320 height=240  style="display: none;"></canvas>
        <script>
          var player = document.getElementById('player');
          var snapshotCanvas = document.getElementById('snapshot');
          var captureButton = document.getElementById('capture');
        
          var handleSuccess = function(stream) {
            // Attach the video stream to the video element and autoplay.
            player.srcObject = stream;
          };
        
          var flag = false;
          captureButton.addEventListener('click', function() {
            var context = snapshot.getContext('2d');
            // Draw the video frame to the canvas.
            if (!flag) {
              context.scale(1.6,1);
              context.translate(-60,0);
              flag=true;
            };

            context.drawImage(player, 0, 0, snapshotCanvas.width, snapshotCanvas.height);

            setTimeout(()=>document.querySelector('#test').src = snapshotCanvas.toDataURL())
          });
        
          navigator.mediaDevices.getUserMedia({video: true})
              .then(handleSuccess);
        </script>
    <!--
        <div id="captura"></div>

        <script>
        
          window.mobilecheck = navigator.userAgent.match(/Android/i);
          
        if( !window.mobilecheck ){
          document.querySelector('#captura').innerHTML = `
            <video id="player" width="450" autoplay></video>
            <button>Imprimir</button>`;
        
          var player = document.getElementById('player');
          player.controls = false;
          player.style.borderRadius = "450px"
          var handleSuccess = function(stream) {
            player.srcObject = stream;
          };
        
          navigator.mediaDevices.getUserMedia({video: true})
              .then(handleSuccess);
          
          document.querySelector('button').onclick=()=>{
              window.print()
          }
        }else{
            document.querySelector('#captura').innerHTML = `
              <input type="file" accept="image/*" capture>`;
        }
        </script>-->
</body>
</html>